import{f as k,j as e,S as f,A as D,E as T}from"./index-D_ahBibg.js";import{c as F,b as A,r as n,L as m}from"./vendor-MrwQVqq1.js";import{S as L}from"./save-CyrCvGWq.js";import{S as H}from"./send-DkDSQ7y6.js";function $(){const{isAuthenticated:b,isContributor:p}=k(),{id:a}=F(),x=A(),r=!!a,[s,h]=n.useState({title:"",summary:"",body:"",journal:"Investment Management",category:"HealthTech"}),[c,o]=n.useState(!1),[y,u]=n.useState(!1),[d,j]=n.useState(!1),w=["Investment Management","Bankruptcy","Legal"],v=["HealthTech","FinTech","LegalTech","RegTech","InsurTech","PropTech","Other"];n.useEffect(()=>{r&&a&&fetch(`/api/articles/${a}`,{credentials:"include"}).then(t=>t.json()).then(t=>{h({title:t.title||"",summary:t.summary||"",body:t.body||"",journal:t.journal||"Investment Management",category:t.category||"HealthTech"})}).catch(t=>console.error("Failed to load article:",t))},[r,a]);const N=async t=>{t.preventDefault(),o(!0);try{const i=r?`/api/articles/${a}`:"/api/articles",g=await fetch(i,{method:r?"PUT":"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});if(g.ok){if(u(!0),setTimeout(()=>u(!1),3e3),!r){const E=await g.json();x(`/articles/edit/${E.id}`)}}else console.error("Failed to save article")}catch(i){console.error("Error saving article:",i)}finally{o(!1)}},S=async()=>{if(!(!r||!a)){o(!0);try{(await fetch(`/api/articles/${a}/submit`,{method:"POST",credentials:"include"})).ok?x("/dashboard"):console.error("Failed to submit for review")}catch(t){console.error("Error submitting for review:",t)}finally{o(!1)}}},l=t=>{h(i=>({...i,[t.target.name]:t.target.value}))},C=t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"-");return b?p?e.jsxs("main",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[e.jsxs("section",{className:"relative px-6 py-32 bg-gradient-to-br from-newtifi-navy via-newtifi-navy/95 to-newtifi-teal/20 text-white overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg%20width%3D%2260%22%20height%3D%2260%22%20viewBox%3D%220%200%2060%2060%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cg%20fill%3D%22%23ffffff%22%20fill-opacity%3D%220.05%22%3E%3Ccircle%20cx%3D%2230%22%20cy%3D%2230%22%20r%3D%222%22/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] opacity-30"}),e.jsx("div",{className:"absolute top-20 right-20 w-32 h-32 border border-white/10 rounded-full"}),e.jsx("div",{className:"absolute bottom-20 left-20 w-24 h-24 bg-newtifi-teal/10 rounded-full"}),e.jsx("div",{className:"absolute top-1/2 left-10 w-16 h-16 border border-white/10 transform rotate-45"}),e.jsx("div",{className:"container mx-auto relative",children:e.jsxs(f,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-10",children:[e.jsx(m,{to:"/dashboard",className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-all",children:e.jsx(D,{className:"h-6 w-6"})}),e.jsx("h1",{className:"text-2xl md:text-2xl font-light",children:r?"Edit Article":"New Article"})]}),e.jsx("div",{className:"mb-10",children:e.jsxs("h2",{className:"text-2xl md:text-4xl lg:text-4xl font-extralight tracking-wider leading-tight uppercase",children:[r?"Edit Your":"Create New"," ",e.jsx("span",{className:"text-newtifi-teal",children:"Article"})]})}),e.jsx("p",{className:"text-base md:text-base leading-relaxed text-white/90 font-light",children:r?"Update your article content and settings":"Write and publish your contribution to NewTIFI"})]})})]}),e.jsx("section",{className:"w-full bg-white py-8",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs(f,{children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-newtifi-navy mb-2",children:"Article Editor"}),e.jsx("div",{className:"w-full h-1 bg-newtifi-navy rounded mb-4"}),e.jsx("h3",{className:"text-lg text-newtifi-teal font-semibold mb-6",children:"Write your article using Markdown"}),e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Article Title *"}),e.jsx("input",{type:"text",id:"title",name:"title",value:s.title,onChange:l,required:!0,className:"w-full px-5 py-4 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-newtifi-teal focus:border-transparent transition-all",placeholder:"Enter a compelling title for your article"}),s.title&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["URL slug: ",C(s.title)]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"journal",className:"block text-sm font-medium text-gray-700 mb-2",children:"Journal *"}),e.jsx("select",{id:"journal",name:"journal",value:s.journal,onChange:l,required:!0,className:"w-full px-5 py-4 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-newtifi-teal focus:border-transparent transition-all",children:w.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),e.jsx("select",{id:"category",name:"category",value:s.category,onChange:l,required:!0,className:"w-full px-5 py-4 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-newtifi-teal focus:border-transparent transition-all",children:v.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"summary",className:"block text-sm font-medium text-gray-700 mb-2",children:"Summary *"}),e.jsx("textarea",{id:"summary",name:"summary",value:s.summary,onChange:l,rows:3,maxLength:300,required:!0,className:"w-full px-5 py-4 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-newtifi-teal focus:border-transparent transition-all",placeholder:"Brief summary of your article (max 300 characters)"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.summary.length,"/300 characters"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{htmlFor:"body",className:"block text-sm font-medium text-gray-700",children:"Article Content *"}),e.jsxs("button",{type:"button",onClick:()=>j(!d),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all flex items-center gap-1",children:[e.jsx(T,{className:"h-4 w-4"}),d?"Edit":"Preview"]})]}),d?e.jsx("div",{className:"w-full px-5 py-4 border border-gray-300 rounded-2xl bg-gray-50 min-h-[400px] prose max-w-none",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:s.body.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>")}})}):e.jsx("textarea",{id:"body",name:"body",value:s.body,onChange:l,rows:20,required:!0,className:"w-full px-5 py-4 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-newtifi-teal focus:border-transparent min-h-[400px] transition-all font-mono text-sm",placeholder:"Write your article content here using Markdown..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use Markdown formatting. **bold**, *italic*, # headings, etc."})]}),e.jsxs("div",{className:"flex gap-4 pt-6",children:[e.jsx("button",{type:"submit",disabled:c||!s.title.trim()||!s.summary.trim()||!s.body.trim(),className:"px-6 py-3 bg-gradient-to-r from-newtifi-navy to-newtifi-teal text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 font-medium flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-4 w-4"}),"Save Draft"]})}),r&&e.jsxs("button",{type:"button",onClick:S,disabled:c||!s.title.trim()||!s.summary.trim()||!s.body.trim(),className:"px-6 py-3 bg-yellow-600 text-white rounded-xl shadow-lg hover:bg-yellow-700 transition-all duration-300 font-medium flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(H,{className:"h-4 w-4"}),"Submit for Review"]}),y&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:"Saved successfully!"})]})]})]}),e.jsxs("div",{className:"mt-8 p-6 bg-gray-50 rounded-2xl border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Markdown Formatting Help"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Headers:"})," # H1, ## H2, ### H3"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bold:"})," **bold text**"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Italic:"})," *italic text*"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Lists:"})," - item or 1. item"]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Links:"})," [text](url)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Code:"})," `inline code`"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Blockquotes:"})," ",">"," quote"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Line breaks:"})," Double space + enter"]})]})]})]})]})]})})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Contributor Access Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You need to be a contributor to create articles."}),e.jsx(m,{to:"/apply-contributor",className:"text-newtifi-teal hover:underline",children:"Apply to become a contributor"})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please log in"}),e.jsx(m,{to:"/login",className:"text-newtifi-teal hover:underline",children:"Go to login page"})]})})}export{$ as default};
//# sourceMappingURL=ArticleEditor-DKAyxuWH.js.map
